ØªÙ…Ø§Ù… ÙŠØ§ Ø¹Ù„ÙŠ ğŸ‘Œ â€” Ø¬Ù‡Ù‘Ø²Øª Ù„Ùƒ Ø¨Ø±ÙˆÙ…Ù†Øª Ù†ØµÙ‘ÙŠ Ù…ØªÙƒØ§Ù…Ù„ ØªØ¨Ù†ÙŠÙ‡ ÙÙˆÙ‚ Ø³ØªØ§Ùƒ â€œØ³Ø¨Ù‚ Ø§Ù„Ø°ÙƒÙŠØ©â€ Ø¹Ø´Ø§Ù† ØµÙØ­Ø© Â«Ù„Ø­Ø¸Ø© Ø¨Ù„Ø­Ø¸Ø©Â» (Timeline Ù…ÙˆØ­Ù‘Ø¯). Ø§Ù„Ø¨Ø±ÙˆÙ…Ù†Øª Ù…ØµØ§Øº ÙƒØ·Ù„Ø¨ ØªÙ†ÙÙŠØ°ÙŠ ÙˆØ§Ø¶Ø­ Ù„Ø®Ø¨ÙŠØ± Ø¨Ø±Ù…Ø¬Ø©/ØªØµÙ…ÙŠÙ… + ÙŠÙˆÙ„Ù‘Ø¯ Ù„Ùƒ Ø§Ù„Ù‡ÙŠØ§ÙƒÙ„ ÙˆØ§Ù„Ù€UI ÙˆØ§Ù„Ù…Ø®Ø±Ø¬Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø©.

â¸»

Ø¨Ø±ÙˆÙ…Ù†Øª Ù†ØµÙ‘ÙŠ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

Ø§Ù„Ø¯ÙˆØ±:
Ø£Ù†Øª Ø®Ø¨ÙŠØ± Full-Stack + UI/UX ÙÙŠ Ù…Ù†ØµØ© Â«Ø³Ø¨Ù‚ Ø§Ù„Ø°ÙƒÙŠØ©Â» (React 18 + TypeScript + Vite + Tailwind + shadcn/ui + Radix UI + TanStack Query + React Hook Form + Zod + date-fns ar-SA). Ø§Ù„ØªØµÙ…ÙŠÙ… RTL-First ÙˆØ®ÙÙŠÙ ÙˆØ³Ø±ÙŠØ¹.

Ø§Ù„Ù…Ù‡Ù…Ø©:
Ø§Ø¨Ù†Ù ØµÙØ­Ø© Ù…ÙˆØ­Ù‘Ø¯Ø© Ø§Ø³Ù…Ù‡Ø§ Â«Ù„Ø­Ø¸Ø© Ø¨Ù„Ø­Ø¸Ø©Â» ØªØ¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø£Ù†Ø´Ø·Ø© (Ø£Ø®Ø¨Ø§Ø±/Ù…Ù‚Ø§Ù„Ø§Øª Ù…Ù†Ø´ÙˆØ±Ø© ÙˆÙ…Ø­Ø¯Ù‘Ø«Ø©ØŒ ØªØ¹Ù„ÙŠÙ‚Ø§ØªØŒ ØªØµÙ†ÙŠÙØ§Øª/ÙˆØ³ÙˆÙ… Ù…Ø¶Ø§ÙØ©ØŒ ØªØ¹Ø¯ÙŠÙ„Ø§Øª ØµÙ„Ø§Ø­ÙŠØ§ØªØŒ ØªÙØ§Ø¹Ù„Ø§ØªØŒ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¹Ø§Ø¬Ù„Ø©ØŒ ÙˆØ³Ø§Ø¦Ø·ØŒâ€¦ Ø¥Ù„Ø®) Ø¶Ù…Ù† Ø®Ø· Ø²Ù…Ù†ÙŠ Ø±Ø£Ø³ÙŠ Ø¨ÙˆØ§Ø¬Ù‡Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© ÙˆØ³Ù„Ø³Ø©ØŒ Ø¨Ø­ÙŠØ« ÙŠÙ‚Ø¯Ø± Ø§Ù„Ø²Ø§Ø¦Ø± ÙŠØ´ÙˆÙ ÙƒÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ù…ÙƒØ§Ù† ÙˆØ§Ø­Ø¯ Ø¨Ø¯ÙˆÙ† Ø§Ù„ØªÙ†Ù‚Ù‘Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù….

â¸»

Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ© (Functional)
	1.	Ù…ØµØ¯Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Unified Activity Feed)
	â€¢	Ø§Ø¬Ù„Ø¨ Ø£Ù†Ø´Ø·Ø© Ù…ÙˆØ­Ù‘Ø¯Ø© Ø¹Ø¨Ø± endpoint ÙˆØ§Ø­Ø¯ Ù…Ø«Ù„:
GET /api/activities?cursor=<id>&limit=30&filters=...
	â€¢	Ø§Ù„ØªØ±ØªÙŠØ¨ ØªÙ†Ø§Ø²Ù„ÙŠÙ‹Ø§ Ø­Ø³Ø¨ occurredAt.
	â€¢	Ø¯Ø¹Ù… Pagination Ø¨Ù†Ù…Ø· cursor + Infinite Scroll (ÙˆØ¶Ø¹ Live Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ø¹Ø¨Ø± WebSocket/SSE).
	â€¢	ÙƒÙ„ Ø¹Ù†ØµØ± Activity ÙŠØ­ØªÙˆÙŠ:

type Activity = {
  id: string;
  type:
    | "article_published" | "article_updated" | "breaking_news"
    | "comment_added" | "reaction_added" | "bookmark_added"
    | "category_created" | "tag_created"
    | "media_uploaded" | "user_registered"
    | "role_changed" | "system_notice"
    | "live_update";
  occurredAt: string; // ISO
  actor?: { id: string; name: string; avatarUrl?: string };
  target?: {
    id?: string;
    kind?: "article" | "category" | "tag" | "user" | "media";
    title?: string;
    slug?: string;
    url?: string;
    imageUrl?: string;
  };
  meta?: Record<string, unknown>; // ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
  importance?: "low" | "normal" | "high" | "urgent";
  summary?: string; // Ù…Ù„Ø®Øµ Ù‚ØµÙŠØ± (ÙŠÙÙˆÙ„Ù‘Ø¯ Ø¢Ù„ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©)
}


	â€¢	Ø§Ù„ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø²Ù…Ù†ÙŠ Ø§Ù„Ø°ÙƒÙŠ: Ù‚Ø³Ù‘Ù… Ø§Ù„ÙŠÙˆÙ… Ø¥Ù„Ù‰ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª (Ø§Ù„ÙŠÙˆÙ…ØŒ Ø£Ù…Ø³ØŒ Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…ØŒâ€¦)ØŒ Ù…Ø¹ Ø±Ø¤ÙˆØ³ Ù„Ø§ØµÙ‚Ø© Sticky headers.

	2.	Ø§Ù„ÙÙ„Ø§ØªØ± ÙˆØ§Ù„Ø¨Ø­Ø« Ø§Ù„Ø³Ø±ÙŠØ¹
	â€¢	ÙÙ„Ø§ØªØ±: Ø§Ù„Ù†ÙˆØ¹ (Type)ØŒ Ø§Ù„Ù…Ø¯Ù‰ Ø§Ù„Ø²Ù…Ù†ÙŠØŒ Ø§Ù„Ø£Ù‡Ù…ÙŠØ©ØŒ ÙƒÙŠØ§Ù† Ø§Ù„Ù‡Ø¯Ù (Ù…Ù‚Ø§Ù„/ØªØµÙ†ÙŠÙ/ÙˆØ³Ù…)ØŒ Ø§Ù„ÙƒØ§ØªØ¨/Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù….
	â€¢	Ø´Ø±ÙŠØ· Ø¨Ø­Ø« Ù†ØµÙŠ ÙÙˆØ±ÙŠ (Debounced) Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†/Ø§Ù„Ù…Ù„Ø®Øµ/Ø§Ù„ÙˆØ³ÙˆÙ….
	3.	Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ§Ù„Ø¯Ù…Ø¬
	â€¢	Ø¯Ù…Ø¬ ØªØ­Ø¯ÙŠØ«Ø§Øª Ù…ØªØªØ§Ù„ÙŠØ© Ù„Ù†ÙØ³ Ø§Ù„Ù…Ù‚Ø§Ù„ Ø®Ù„Ø§Ù„ 15 Ø¯Ù‚ÙŠÙ‚Ø© ÙÙŠ Thread Collapsible (ÙŠØ¸Ù‡Ø± Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ« ÙƒØ¨Ø·Ø§Ù‚Ø© Ø±Ø¦ÙŠØ³ÙŠØ©).
	â€¢	ÙƒØ´Ù Ø§Ù„ØªÙƒØ±Ø§Ø± (De-dup) Ù„Ù†ÙØ³ Ø§Ù„Ø­Ø¯Ø« Ù„Ùˆ ÙˆØµÙ„ Ø¹Ø¨Ø± Ù‚Ù†Ø§ØªÙŠÙ†.
	â€¢	Ø¥Ø¨Ø±Ø§Ø² Breaking/Ø¹Ø§Ø¬Ù„ Ø¨Ø¹Ù„Ø§Ù…Ø© ÙˆÙ„ÙˆÙ† ÙˆØ§Ù‡ØªØ²Ø§Ø² Ø·ÙÙŠÙ (Motion) Ø¹Ù†Ø¯ ÙˆØ¶Ø¹ Live.
	4.	Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹ (Lucide/Radix)
	â€¢	article_published: Newspaper
	â€¢	article_updated: Edit3
	â€¢	breaking_news: AlertTriangle
	â€¢	comment_added: MessageSquare
	â€¢	reaction_added: Heart
	â€¢	bookmark_added: Bookmark
	â€¢	category_created: FolderPlus
	â€¢	tag_created: Tag
	â€¢	media_uploaded: Image
	â€¢	user_registered: UserPlus
	â€¢	role_changed: ShieldCheck
	â€¢	system_notice: Info
	â€¢	live_update: Radio
	5.	Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ§Ù„ÙØ±Ø§Øº ÙˆØ§Ù„Ø£Ø®Ø·Ø§Ø¡
	â€¢	Skeletons Ø±Ø´ÙŠÙ‚Ø© Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ØªØ§ÙŠÙ…Ù„Ø§ÙŠÙ†.
	â€¢	Ø­Ø§Ù„Ø© ÙØ±Ø§Øº Ø¨Ø¹Ø¨Ø§Ø±Ø©: Â«Ù„Ø§ Ø¬Ø¯ÙŠØ¯ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù† â€” ØªØ§Ø¨Ø¹Ù†Ø§ØŒ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ØªØµÙ„ Ù„Ø­Ø¸ÙŠÙ‹Ø§ âœ¨Â».
	â€¢	Ø§Ø³ØªØ±Ø¬Ø§Ø¹ (Retry) Ù„Ù„Ø£Ø®Ø·Ø§Ø¡ Ù…Ø¹ Ø¥Ø´Ø¹Ø§Ø± ØºÙŠØ± Ù…Ø²Ø¹Ø¬.
	6.	Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
	â€¢	Ø²Ø± â€œØªØ­Ø¯ÙŠØ«Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø©â€ ÙŠÙÙØ¹Ù‘Ù„ Ù‚Ù†Ø§Ø© SSE/WebSocket:
	â€¢	Ø¹Ù†Ø¯ ÙˆØµÙˆÙ„ Ø¯ÙØ¹Ø© Ø¬Ø¯ÙŠØ¯Ø©ØŒ ÙŠØ¸Ù‡Ø± Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ: Â«ÙˆØµÙ„Øª X ØªØ­Ø¯ÙŠØ«Ø§Øª â€” Ø¹Ø±Ø¶ Ø§Ù„Ø¢Ù†Â».
	7.	Ø¥ØªØ§Ø­Ø© (A11y) ÙˆØ¯Ø¹Ù… Ø¹Ø±Ø¨ÙŠ
	â€¢	RTL ÙƒØ§Ù…Ù„ØŒ Ù…ÙØ§ØªÙŠØ­ Ù„ÙˆØ­Ø© Ù…ÙØ§ØªÙŠØ­ØŒ ARIA roles Ù„Ù„ØªØ§ÙŠÙ…Ù„Ø§ÙŠÙ† (role="feed").
	â€¢	ØªÙ†Ø³ÙŠÙ‚Ø§Øª ØªØ§Ø±ÙŠØ® Ø¹Ø±Ø¨ÙŠØ© date-fns/locale/arSA (Ù…Ø«Ù„Ø§Ù‹: â€œØ§Ù„Ø¥Ø«Ù†ÙŠÙ†ØŒ 13 Ø£ÙƒØªÙˆØ¨Ø± 2025 â€¢ 09:30 Øµâ€).
	8.	Ø§Ù„Ø£Ø¯Ø§Ø¡
	â€¢	Virtualized list Ø¹Ù†Ø¯ > 300 Ø¹Ù†ØµØ± (react-virtual).
	â€¢	ØµÙˆØ± Lazy + <img loading="lazy">.
	â€¢	TanStack Query: Cache/PrefetchØŒ Ù…ÙØ§ØªÙŠØ­ ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„ÙÙ„Ø§ØªØ±.
	9.	RBAC
	â€¢	Ø£Ø­Ø¯Ø§Ø« Ø­Ø³Ø§Ø³Ø© (role_changedØŒ system_notice) Ù„Ø§ ØªØ¸Ù‡Ø± Ø¥Ù„Ø§ Ù„Ù…Ù† ÙŠÙ…Ù„Ùƒ ØµÙ„Ø§Ø­ÙŠØ§Øª (Editor/Admin).
	10.	Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª
	â€¢	Ù„Ù‚Ø· Ø£Ø­Ø¯Ø§Ø« UI: filter_applied, item_opened, live_enabled, new_batch_viewed.

â¸»

Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø´ÙƒÙ„ÙŠØ© (UI/UX)
	1.	ØªØ§ÙŠÙ…Ù„Ø§ÙŠÙ† Ø±Ø£Ø³ÙŠ
	â€¢	Ø¹Ù…ÙˆØ¯ ÙŠØ³Ø§Ø± (RTL) Ø®Ø· Ø¹Ù…ÙˆØ¯ÙŠ Ø®Ø§ÙØª Ù…Ø¹ Ø¯ÙˆØ§Ø¦Ø± ØªÙ…Ø«Ù„ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«.
	â€¢	Ø¹Ù„Ù‰ ÙŠÙ…ÙŠÙ†Ù‡ Ø¨Ø·Ø§Ù‚Ø© shadcn/ui Ù„ÙƒÙ„ Ø­Ø¯Ø«.
	â€¢	ØªØ¯Ø±Ù‘Ø¬ Ø®ÙÙŠÙ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø·ØŒ ÙˆØªÙˆÙ‡Ù‘Ø¬ Ø¨Ø³ÙŠØ· Ù„Ù„Ø¯Ø§Ø¦Ø±Ø© Ø¹Ù†Ø¯ â€œØ¹Ø§Ø¬Ù„â€.
	2.	Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø­Ø¯Ø« (Card)
	â€¢	Ø±Ø£Ø³: Ø£ÙŠÙ‚ÙˆÙ†Ø© + Ù†ÙˆØ¹ Ø§Ù„Ø­Ø¯Ø« + ÙˆÙ‚Øª Ù†Ø³Ø¨ÙŠ (Ù‚Ø¨Ù„ 5 Ø¯Ù‚Ø§Ø¦Ù‚) + ÙˆÙ‚Øª Ù…Ø·ÙˆÙ‘Ù„ Tooltip.
	â€¢	Ø¹Ù†ÙˆØ§Ù† Ù…Ø®ØªØµØ± + ÙˆØµÙ/Ù…Ù„Ø®Øµ (Ø³Ø·Ø±ÙŠÙ† max Ù…Ø¹ clamp).
	â€¢	ØµÙˆØ±Ø© Ù…ØµØºÙ‘Ø±Ø© Ø¥Ù† ÙˆØ¬Ø¯Øª (Ù„Ù„Ø£Ø®Ø¨Ø§Ø±/Ø§Ù„ØµÙˆØ±).
	â€¢	Ø£Ø²Ø±Ø§Ø±: â€œØ¹Ø±Ø¶ Ø§Ù„Ø®Ø¨Ø±â€ØŒ â€œÙ†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·â€ØŒ â€œØ§Ù„Ù…Ø²ÙŠØ¯â€ (Ù‚Ø§Ø¦Ù…Ø© Ø«Ø§Ù†ÙˆÙŠØ©).
	â€¢	Ø´Ø§Ø±Ø© Ø£Ù‡Ù…ÙŠØ©: urgent Ø¨Ø§Ù„Ù€Badge.
	3.	Ø§Ù„ØªØ¬Ù…ÙŠØ¹ Ø§Ù„ÙŠÙˆÙ…ÙŠ
	â€¢	ÙÙˆØ§ØµÙ„ Ù…Ø¹Ù†ÙˆÙ†Ø©: â€œØ§Ù„ÙŠÙˆÙ…â€ØŒ â€œØ£Ù…Ø³â€ØŒ â€œØ§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠâ€ØŒ â€œØ§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠâ€.
	4.	Ù„ÙˆØ­Ø© ÙÙ„Ø§ØªØ± Ø¹Ù„ÙˆÙŠØ©
	â€¢	Select Ù„Ù„Ù†ÙˆØ¹ØŒ DateRangeØŒ Toggle Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙŠØŒ Ø­Ù‚Ù„ Ø¨Ø­Ø«.
	5.	Ø­Ø±ÙƒØ§Øª Ø®ÙÙŠÙØ©
	â€¢	Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø¨Ù€Framer Motion (fade+slide Ø¨Ù…Ø¯Ø© 120â€“180ms).

â¸»

Ù…Ø®Ø±Ø¬Ø§Øª Ù…Ø·Ù„ÙˆØ¨Ø© Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ (Deliverables)
	1.	Ù…Ø®Ø·Ø· Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (JSX): Ù…ÙƒÙˆÙ‘Ù† MomentByMomentPage Ù…Ø¹:
	â€¢	FiltersBar, Timeline, TimelineItem, DateGroupHeader, LiveToggle.
	2.	Ù†Ù…ÙˆØ°Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª TypeScript (ÙƒÙ…Ø§ Ø£Ø¹Ù„Ø§Ù‡).
	3.	Ù‡ÙˆÙƒ TanStack Query:
	â€¢	useActivities({ filters, cursor }) + infinite scroll.
	4.	Ø¯Ø§Ù„Ø© ØªØ¬Ù…ÙŠØ¹ Grouping Ø­Ø³Ø¨ Ø§Ù„ÙŠÙˆÙ…/Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹.
	5.	Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª.
	6.	Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„/Ø§Ù„ÙØ±Ø§Øº/Ø§Ù„Ø®Ø·Ø£.
	7.	Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ© (Zod schema + render tests).
	8.	Ù†ØµÙˆØµ ÙˆØ§Ø¬Ù‡Ø© (i18n) Ø¬Ø§Ù‡Ø²Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.

â¸»

Ø¹Ù‚ÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚ (Zod)

import { z } from "zod";

export const ActivitySchema = z.object({
  id: z.string().min(1),
  type: z.enum([
    "article_published","article_updated","breaking_news",
    "comment_added","reaction_added","bookmark_added",
    "category_created","tag_created",
    "media_uploaded","user_registered",
    "role_changed","system_notice","live_update"
  ]),
  occurredAt: z.string().datetime(),
  actor: z.object({
    id: z.string().optional(),
    name: z.string().optional(),
    avatarUrl: z.string().url().optional()
  }).optional(),
  target: z.object({
    id: z.string().optional(),
    kind: z.enum(["article","category","tag","user","media"]).optional(),
    title: z.string().optional(),
    slug: z.string().optional(),
    url: z.string().url().optional(),
    imageUrl: z.string().url().optional()
  }).optional(),
  meta: z.record(z.unknown()).optional(),
  importance: z.enum(["low","normal","high","urgent"]).default("normal"),
  summary: z.string().optional()
});
export type Activity = z.infer<typeof ActivitySchema>;


â¸»

ÙˆØ§Ø¬Ù‡Ø© API Ù…Ù‚ØªØ±Ø­Ø©
	â€¢	GET /api/activities
	â€¢	Query: cursor, limit, type[], importance, q, from, to, targetKind, actorId
	â€¢	Response:

{
  "items": [/* Activity[] */],
  "nextCursor": "string|null",
  "serverTime": "2025-10-13T06:30:00.000Z"
}



â¸»

Ù†ØµÙˆØµ ÙˆØ§Ø¬Ù‡Ø© Ø¬Ø§Ù‡Ø²Ø© (Microcopy)
	â€¢	Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: Ù„Ø­Ø¸Ø© Ø¨Ù„Ø­Ø¸Ø©
	â€¢	Ø§Ù„ÙˆØµÙ: ÙƒÙ„ Ù…Ø§ ÙŠØ®Øµ Ø³Ø¨Ù‚ Ø§Ù„Ø°ÙƒÙŠØ© ÙÙŠ ØµÙØ­Ø© ÙˆØ§Ø­Ø¯Ø© â€” ØªØ­Ø¯ÙŠØ«Ø§Øª Ø­ÙŠØ© ÙˆØ³Ø±ÙŠØ¹Ø©.
	â€¢	Ø§Ù„Ø£Ø²Ø±Ø§Ø±:
	â€¢	â€œØªØ­Ø¯ÙŠØ«Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø©â€ / â€œØ¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¨Ø«â€
	â€¢	â€œØ¹Ø±Ø¶ Ø§Ù„Ø®Ø¨Ø±â€ / â€œØ§Ù„Ù…Ø²ÙŠØ¯â€
	â€¢	Ø­Ø§Ù„Ø§Øª:
	â€¢	ÙØ±Ø§Øº: Ù„Ø§ Ø¬Ø¯ÙŠØ¯ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†. Ø§Ø¨Ù‚Ù Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©Ø› Ø³Ù†Ø­Ø¯Ù‘Ø«Ùƒ ÙÙˆØ±Ù‹Ø§.
	â€¢	Ø®Ø·Ø£: ØªØ¹Ø°Ù‘Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.

â¸»

Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù‚Ø¨ÙˆÙ„ (Acceptance Criteria)
	â€¢	ØªØ­Ù…ÙŠÙ„ Ø£ÙˆÙ„ÙŠ â‰¤ 1.2s Ø¹Ù„Ù‰ Ø§ØªØµØ§Ù„ Ø¹Ø§Ø¯ÙŠ.
	â€¢	ØªÙ…Ø±ÙŠØ± Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ Ø³Ù„Ø³ Ø­ØªÙ‰ 1000 Ø¹Ù†ØµØ± Ù…Ø¹ Virtualization.
	â€¢	ÙÙ„Ø§ØªØ± ØªØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©ØŒ ÙˆØªØ­ÙØ¸ Ø§Ù„Ø­Ø§Ù„Ø© ÙÙŠ URL.
	â€¢	RTL ØµØ­ÙŠØ­ØŒ Sticky Ù„Ù„ØªÙˆØ§Ø±ÙŠØ®ØŒ ÙˆØ­Ø§Ù„Ø§Øª Skeleton/Empty/Error Ù…ØªÙ‚Ù†Ø©.
	â€¢	Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ØµØ­ÙŠØ­Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹ØŒ ÙˆBadge â€œØ¹Ø§Ø¬Ù„â€ ÙˆØ§Ø¶Ø­Ø©.
	â€¢	Ø§Ø­ØªØ±Ø§Ù… RBAC Ø¨Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø­Ø³Ø§Ø³Ø©.
	â€¢	Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Zod ØªÙØ´Ù„ Ø¹Ù†Ø¯ Ø£ÙŠ Ø´ÙƒÙ„ ØºÙŠØ± Ù…ØªÙˆØ§ÙÙ‚.

â¸»

Ù…Ù‚ØªØ·Ù ÙˆØ§Ø¬Ù‡Ø© (Skeleton React/TS) â€” Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø±ÙŠØ¹

Ø§Ù†Ø³Ø®Ù‡ Ù„Ù…Ø´Ø±ÙˆØ¹ÙƒØ› ÙŠØ¹ØªÙ…Ø¯ Tailwind + shadcn/ui + TanStack Query.

import { useInfiniteQuery } from "@tanstack/react-query";
import { Card } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { useEffect, useMemo, useRef } from "react";
import { Activity } from "@/lib/types";
import { format, formatDistanceToNow } from "date-fns";
import { arSA } from "date-fns/locale";

export default function MomentByMomentPage() {
  // TODO: wire filters state (URL) + queryFn
  const { data, fetchNextPage, hasNextPage, isFetchingNextPage, status } =
    useInfiniteQuery({
      queryKey: ["activities"],
      queryFn: async ({ pageParam }) => {
        const url = new URL("/api/activities", window.location.origin);
        if (pageParam) url.searchParams.set("cursor", pageParam);
        const res = await fetch(url);
        const json = await res.json();
        return json as { items: Activity[]; nextCursor?: string | null };
      },
      getNextPageParam: (last) => last.nextCursor ?? undefined,
      initialPageParam: undefined
    });

  const items = useMemo(
    () => data?.pages.flatMap((p) => p.items) ?? [],
    [data]
  );

  // Infinite scroll sentinel
  const sentinelRef = useRef<HTMLDivElement>(null);
  useEffect(() => {
    if (!sentinelRef.current) return;
    const io = new IntersectionObserver((entries) => {
      if (entries[0].isIntersecting && hasNextPage && !isFetchingNextPage) {
        fetchNextPage();
      }
    });
    io.observe(sentinelRef.current);
    return () => io.disconnect();
  }, [hasNextPage, isFetchingNextPage, fetchNextPage]);

  if (status === "pending") return <TimelineSkeleton />;
  if (status === "error") return <EmptyState title="ØªØ¹Ø°Ù‘Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„" subtitle="Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ù‹Ø§." />;

  return (
    <div dir="rtl" className="container mx-auto max-w-3xl py-6">
      <header className="mb-4 flex items-center justify-between">
        <div>
          <h1 className="text-2xl font-bold">Ù„Ø­Ø¸Ø© Ø¨Ù„Ø­Ø¸Ø©</h1>
          <p className="text-sm text-muted-foreground">
            ÙƒÙ„ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ÙÙŠ ØµÙØ­Ø© ÙˆØ§Ø­Ø¯Ø© â€” ØªØ­Ø¯ÙŠØ«Ø§Øª Ø­ÙŠØ© ÙˆØ³Ø±ÙŠØ¹Ø©.
          </p>
        </div>
        <Button variant="outline">ØªØ­Ø¯ÙŠØ«Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø©</Button>
      </header>

      <div className="relative pl-4">
        {/* Ø®Ø· Ø§Ù„ØªØ§ÙŠÙ…Ù„Ø§ÙŠÙ† (ÙŠØ³Ø§Ø± ÙÙŠ RTL) */}
        <span className="absolute right-0 top-0 h-full w-px bg-border" aria-hidden />

        <ul className="space-y-4">
          {items.map((a) => (
            <li key={a.id} className="relative pr-5">
              {/* Ø§Ù„Ù†Ù‚Ø·Ø© */}
              <span className="absolute -right-[6px] mt-3 inline-block h-3 w-3 rounded-full bg-primary shadow" aria-hidden />
              <ActivityCard a={a} />
            </li>
          ))}
        </ul>

        <div ref={sentinelRef} className="h-10" />
        {isFetchingNextPage && <TimelineSkeleton count={3} />}
        {!hasNextPage && items.length > 0 && (
          <p className="mt-6 text-center text-sm text-muted-foreground">Ù„Ø§ Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¹Ù†Ø§ØµØ±</p>
        )}
        {items.length === 0 && <EmptyState title="Ù„Ø§ Ø¬Ø¯ÙŠØ¯" subtitle="ØªØ§Ø¨Ø¹Ù†Ø§Ø› Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ØªØµÙ„ ÙÙˆØ±Ù‹Ø§ âœ¨" />}
      </div>
    </div>
  );
}

function ActivityCard({ a }: { a: Activity }) {
  const timeAbs = format(new Date(a.occurredAt), "EEEE, d MMMM yyyy â€¢ h:mm a", { locale: arSA });
  const timeRel = formatDistanceToNow(new Date(a.occurredAt), { addSuffix: true, locale: arSA });

  return (
    <Card className="p-4">
      <div className="flex items-start justify-between gap-3">
        <div className="space-y-1">
          <div className="flex items-center gap-2">
            <span className="font-medium">{labelOf(a.type)}</span>
            {a.importance === "urgent" && <Badge variant="destructive">Ø¹Ø§Ø¬Ù„</Badge>}
            <span className="text-xs text-muted-foreground" title={timeAbs}>{timeRel}</span>
          </div>
          <div className="text-sm">
            {a.target?.title ?? a.summary ?? "â€”"}
          </div>
        </div>
        {a.target?.imageUrl && (
          <img src={a.target.imageUrl} alt="" className="h-14 w-20 rounded object-cover" loading="lazy" />
        )}
      </div>
      <div className="mt-3 flex items-center gap-2">
        {a.target?.url && <Button size="sm" asChild><a href={a.target.url}>Ø¹Ø±Ø¶</a></Button>}
        <Button size="sm" variant="ghost">Ø§Ù„Ù…Ø²ÙŠØ¯</Button>
      </div>
    </Card>
  );
}

function labelOf(t: Activity["type"]) {
  const map: Record<Activity["type"], string> = {
    article_published: "Ù†Ø´Ø± Ø®Ø¨Ø±",
    article_updated: "ØªØ­Ø¯ÙŠØ« Ø®Ø¨Ø±",
    breaking_news: "Ø®Ø¨Ø± Ø¹Ø§Ø¬Ù„",
    comment_added: "Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚",
    reaction_added: "ØªÙØ§Ø¹Ù„",
    bookmark_added: "Ø¥Ø´Ø§Ø±Ø© Ù…Ø±Ø¬Ø¹ÙŠØ©",
    category_created: "Ø¥Ø¶Ø§ÙØ© ØªØµÙ†ÙŠÙ",
    tag_created: "Ø¥Ø¶Ø§ÙØ© ÙˆØ³Ù…",
    media_uploaded: "Ø±ÙØ¹ ÙˆØ³Ø§Ø¦Ø·",
    user_registered: "Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯",
    role_changed: "ØªØºÙŠÙŠØ± ØµÙ„Ø§Ø­ÙŠØ©",
    system_notice: "ØªÙ†Ø¨ÙŠÙ‡ Ù†Ø¸Ø§Ù…",
    live_update: "ØªØ­Ø¯ÙŠØ« Ù„Ø­Ø¸ÙŠ",
  };
  return map[t] ?? t;
}

function TimelineSkeleton({ count = 5 }: { count?: number }) {
  return (
    <ul className="space-y-4 animate-pulse">
      {Array.from({ length: count }).map((_, i) => (
        <li key={i} className="relative pr-5">
          <span className="absolute -right-[6px] mt-3 inline-block h-3 w-3 rounded-full bg-muted-foreground/30" />
          <Card className="p-4">
            <div className="h-4 w-40 bg-muted rounded mb-2" />
            <div className="h-3 w-64 bg-muted rounded" />
          </Card>
        </li>
      ))}
    </ul>
  );
}

function EmptyState({ title, subtitle }: { title: string; subtitle?: string }) {
  return (
    <div className="py-12 text-center">
      <h3 className="text-lg font-semibold">{title}</h3>
      {subtitle && <p className="text-sm text-muted-foreground mt-1">{subtitle}</p>}
    </div>
  );
}


â¸»

Ù…Ù„Ø§Ø­Ø¸Ø§Øª ØªÙ†ÙÙŠØ°ÙŠØ© Ø³Ø±ÙŠØ¹Ø©
	â€¢	Ø§Ø±Ø¨Ø· Ø§Ù„ÙÙ„Ø§ØªØ± Ø¨Ù€URL Ø¹Ø¨Ø± useSearchParams (Ù…Ø«Ù„Ø§Ù‹ Ù…Ø¹ Wouter) Ø¹Ø´Ø§Ù† Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø³Ù‡Ù„Ø©.
	â€¢	Ù„Ù„ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø²Ù…Ù†ÙŠ: Ø£Ù†Ø´Ø¦ Ø¯Ø§Ù„Ø© ØªÙØ±Ø¬Ø¹ { label, items[] } Ù„ÙƒÙ„ ÙŠÙˆÙ….
	â€¢	Ù„Ùˆ Ø¨ØªÙØ¹Ù„ Live: Ø¹Ù†Ø¯ ÙˆØµÙˆÙ„ Ø¯ÙØ¹Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø®Ø²Ù†Ù‡Ø§ Ù…Ø¤Ù‚ØªÙ‹Ø§ ÙˆØ£Ø¸Ù‡Ø± Ø´Ø±ÙŠØ· â€œØ¹Ø±Ø¶ X ØªØ­Ø¯ÙŠØ«Ø§Øªâ€ Ø¨Ø¯Ù„ Ù…Ø§ ØªØ¯ÙÙ‡Ø§ Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„ØªØ§ÙŠÙ…Ù„Ø§ÙŠÙ† (ØªØ¬Ø±Ø¨Ø© Ø£Ù„Ø·Ù).
	â€¢	Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Lucide: Ø£Ø¶ÙÙ‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø­Ø³Ø¨ Ù…ÙƒØªØ¨ØªÙƒ Ø§Ù„Ù…ÙØ¶Ù„Ø©Ø› Ø§Ù„Ù…Ø§Ø¨ Ø¬Ø§Ù‡Ø².

â¸»

Ø¥Ø°Ø§ ÙˆØ¯Ù‘ÙƒØŒ Ø£Ø­ÙˆÙ‘Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙˆÙ…Ù†Øª Ù„Ù…Ù„Ù Prompt JSON Ø¯Ø§Ø®Ù„ÙŠ Ù„Ù„ÙØ±ÙŠÙ‚ Ø§Ù„ØªØ­Ø±ÙŠØ±ÙŠ/Ø§Ù„ØªÙ‚Ù†ÙŠØŒ Ø£Ùˆ Ø£Ø±ÙƒÙ‘Ø¨ Ù„Ùƒ Ù†Ø³Ø®Ø© â€œmini-PRDâ€ Ù…Ø¹ Ù…Ù‡Ø§Ù… Jira.