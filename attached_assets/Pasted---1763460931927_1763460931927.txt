Ø£Ù†Øª Ø®Ø¨ÙŠØ± ÙÙŠ Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù†Ø´Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙˆØªÙƒØ§Ù…Ù„Ù‡Ø§ Ù…Ø¹ ÙˆØ§ØªØ³Ø§Ø¨ØŒ Ø£Ø­ØªØ§Ø¬ Ø§Ø³ØªØ´Ø§Ø±ØªÙƒ Ù„ØªØµÙ…ÙŠÙ… Ù†Ø¸Ø§Ù… Ù…ØªØ·ÙˆØ± ÙŠØ±Ø¨Ø· Ø¨ÙŠÙ† ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ§Ù„Ù†Ø´Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø´ÙƒÙ„ Ø¢Ù…Ù† ÙˆÙØ¹Ø§Ù„. Ø£Ø±ÙŠØ¯ Ø£Ù† ÙŠØªÙ…ÙƒÙ† Ø§Ù„ØµØ­ÙÙŠ Ù…Ù† Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ÙƒÙ„Ù…Ø© Ø³Ø± (Token)ØŒ Ø¨Ø­ÙŠØ« ÙŠØªÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŒ ØªØ­ÙˆÙŠÙ„Ù‡Ø§ Ù„Ù…Ø§Ø¯Ø© Ø¥Ø¹Ù„Ø§Ù…ÙŠØ©ØŒ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ØµÙˆØ±ØŒ Ù…Ø¹Ø§Ù„Ø¬ØªÙ‡Ø§ØŒ Ù†Ø´Ø±Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØµØ©ØŒ Ø«Ù… Ø¥Ø±Ø¬Ø§Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø¨Ø± Ø¨Ø´ÙƒÙ„ Ù…ÙˆØ«ÙˆÙ‚ ÙˆÙ…Ù†Ø¸Ù…. Ø£Ø±Ø¬Ùˆ Ø£Ù† ØªØ¶Ø¹ Ø®Ø·Ø© Ù…ØªÙƒØ§Ù…Ù„Ø© ØªØªØ¬Ù†Ø¨ Ø§Ù„Ø­Ù„ÙˆÙ„ ØºÙŠØ± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© ÙˆØªØ±Ø§Ø¹ÙŠ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø£Ù…Ù†ÙŠØ© ÙˆØ§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ø¶Ù…Ø§Ù† Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ Ø¨ÙƒÙØ§Ø¡Ø© ÙˆØ¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©.

ğŸ¯ Ù†Ø¹Ù…â€¦ ØªÙ‚Ø¯Ø± ØªØ±Ø¨Ø· Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ø´Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ø¹ ÙˆØ§ØªØ³Ø§Ø¨

ÙˆØªÙ‚Ø¯Ø± ØªØ®Ù„ÙŠ Ø§Ù„ØµØ­ÙÙŠ ÙŠØ±Ø³Ù„ Ù„Ùƒ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨ + ÙƒÙ„Ù…Ø© Ø³Ø± (Token)
â†’ Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ£Ø®Ø° Ø§Ù„Ø±Ø³Ø§Ù„Ø©
â†’ ÙŠØ­ÙˆÙ„Ù‡Ø§ Ù„Ù…Ø§Ø¯Ø©
â†’ ÙŠØ³ØªØ®Ø±Ø¬ Ø§Ù„ØµÙˆØ±
â†’ ÙŠØ¹Ø§Ù„Ø¬Ù‡Ø§
â†’ ÙŠÙ†Ø´Ø±Ù‡Ø§
â†’ ÙˆÙŠØ±Ø¬Ø¹ Ù„Ù‡ Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø¨Ø± ÙƒÙ…Ø§Ù†.

Ø¨Ø³ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ù„Ù‡Ø§ Ø·Ø¨Ù‚Ø§Øª.
ÙˆØ£Ù†Øª Ù…Ø­ØªØ§Ø¬ ØªØ¹Ù…Ù„Ù‡Ø§ â€œØµØ­â€ â€” Ù…Ùˆ Ø¨Ù€ hacks.

Ø®Ù„ÙŠÙ†ÙŠ Ø£Ø´Ø±Ø­Ù‡Ø§ Ù„Ùƒ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©ØŒ Ø¨Ø£Ø³Ù„ÙˆØ¨ Ø²ÙØ¯â€¦ Ø´Ø§Ø¹Ø±ÙŠâ€¦ Ø¹Ù…Ù„ÙŠâ€¦ Ø±Ø³Ù…ÙŠâ€¦ ÙˆØ¨Ø·Ø±ÙŠÙ‚Ø© ØªÙ„ÙŠÙ‚ Ø¨Ù…Ø´Ø±ÙˆØ¹ Ø¥Ø¹Ù„Ø§Ù…ÙŠ Ø¶Ø®Ù… Ù…Ø«Ù„Ùƒ ğŸ‘‡

â¸»

ğŸš€ Ø§Ù„Ù…Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ø§Ù…

Ø´ÙˆÙ ÙŠØ§ Ø£Ø¨Ùˆ Ù…Ø­Ù…Ø¯â€¦

Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø§ ÙŠØ±Ø³Ù„ Webhooks Ù…Ø¬Ø§Ù†ÙŠ Ù…Ø«Ù„ SendGrid.
Ù„Ø§Ø²Ù… ØªØ³ØªØ®Ø¯Ù… WhatsApp Business API â€” ÙˆÙ‡Ø°Ø§ ÙŠÙƒÙˆÙ† Ø¹Ø¨Ø± Meta (ÙÙŠØ³Ø¨ÙˆÙƒ) Ø¨Ø´ÙƒÙ„ Ø±Ø³Ù…ÙŠ.

Ø¨Ø¹Ø¯Ù‡Ø§:
	1.	ØªØ±Ø¨Ø· Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø±Ø³Ù…ÙŠ (Business)
	2.	ØªÙØ¹Ù‘Ù„ Webhook URL (Ù†ÙØ³ webhook ØªØ¨Ø¹ SendGrid Ù„ÙƒÙ† Ù†Ø³Ø®Ø© ÙˆØ§ØªØ³Ø§Ø¨)
	3.	ÙƒÙ„ Ø±Ø³Ø§Ù„Ø© ØªØµÙ„Ùƒ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… â†’ ØªÙØ±Ø³Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ù„Ø³ÙŠØ±ÙØ±Ùƒ
	4.	Ø³ÙŠØ±ÙØ±Ùƒ ÙŠØ³ØªÙ‚Ø¨Ù„ JSON ÙÙŠÙ‡:
	â€¢	Ø§Ø³Ù… Ø§Ù„Ù…ÙØ±Ø³Ù„
	â€¢	Ø±Ù‚Ù…Ù‡
	â€¢	Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
	â€¢	Ø§Ù„ØµÙˆØ± (encoded)
	â€¢	Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
	â€¢	Ø§Ù„ØµÙˆØª
	5.	ÙˆØ¨Ø¹Ø¯Ù‡Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ø§Ù…Ù„Ù‡Ø§ Ù…Ø«Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:
	â€¢	ÙŠØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„ØµØ­ÙÙŠ Ù…ÙˆÙÙˆØ¶ Ø¹Ø¨Ø± Token Ø£Ùˆ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø¯Ø§Ø®Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
	â€¢	ÙŠØ³ØªØ®Ø±Ø¬ Ø§Ù„Ù†Øµ
	â€¢	ÙŠØ³ØªØ®Ø±Ø¬ Ø§Ù„ØµÙˆØ±
	â€¢	ÙŠØ±Ø³Ù„Ù‡Ø§ Ù„Ù€ AI Ù„Ù„ØªØ­Ø±ÙŠØ±
	â€¢	ÙŠÙ†Ø´Ø± Ø§Ù„Ø®Ø¨Ø±
	â€¢	ÙŠØ±Ø¬Ù‘Ø¹ Ù„Ù„ØµØ­ÙÙŠ â€œØªÙ… Ù†Ø´Ø± Ø§Ù„Ø®Ø¨Ø±â€ + Ø§Ù„Ø±Ø§Ø¨Ø·

Ø£Ù‚Ø³Ù… Ø¨Ø§Ù„Ù„Ù‡â€¦ doable 100%.

â¸»

ğŸ§  ÙƒÙŠÙ Ù†Ø±Ø¨Ø· ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ù†Ø¸Ø§Ù… Ø³Ø¨Ù‚ Ø§Ù„Ø°ÙƒÙŠØ© ØªÙ‚Ù†ÙŠÙ‹Ø§ØŸ

ğŸŸ¦ Ø§Ù„Ø®Ø·ÙˆØ© 1 â€” Ø¥Ù†Ø´Ø§Ø¡ WhatsApp Business API

Ø¹Ø¨Ø± Meta Business Manager:
	1.	Ø¥Ù†Ø´Ø§Ø¡ WhatsApp App
	2.	Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰:
	â€¢	phone_number_id
	â€¢	whatsapp_business_account_id
	â€¢	access_token

Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ù…Ù‡Ù…Ø© Ù„Ø£Ù†Ù‡Ø§ ØªØ¹Ø·ÙŠÙƒ Ù‚Ù†ÙˆØ§Øª Ø±Ø³Ù…ÙŠØ© Ù…Ø³ØªÙ‚Ø±Ø©.

â¸»

ğŸŸ§ Ø§Ù„Ø®Ø·ÙˆØ© 2 â€” ØªÙØ¹ÙŠÙ„ Webhook

ØªØ±Ø³Ù„ Ù„Ù€ Meta Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ webhook Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ:

https://sabq.life/api/whatsapp/webhook

ÙƒÙ„ Ø±Ø³Ø§Ù„Ø© ÙˆØ§ØªØ³Ø§Ø¨ ØªØ³ØªÙ‚Ø¨Ù„Ù‡Ø§ Ø´Ø±ÙƒØªÙƒ â†’ Meta ØªØ±Ø³Ù„Ù‡Ø§ Ø¥Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠ Ø«ÙˆØ§Ù†Ù.

â¸»

ğŸŸ© Ø§Ù„Ø®Ø·ÙˆØ© 3 â€” Ø¨Ù†Ø§Ø¡ Route Ø¬Ø¯ÙŠØ¯ Ù…Ø«Ù„ Route Ø§Ù„Ø¨Ø±ÙŠØ¯

Ù…Ø«Ù„:

app.post("/api/whatsapp/webhook", whatsappWebhookHandler);

Ù‡Ø°Ø§ Ø§Ù„Ù€ handler ÙŠØ³ØªÙ‚Ø¨Ù„:

{
  "from": "9665XXXXXX",
  "message": " Ù‡Ø°Ø§ Ø®Ø¨Ø± Ø¹Ø§Ø¬Ù„ â€¦ TOKEN:12345 ",
  "media": [
    {
      "type": "image",
      "url": "https://....jpg"
    }
  ]
}


â¸»

ğŸŸ¥ Ø§Ù„Ø®Ø·ÙˆØ© 4 â€” Ø¢Ù„ÙŠØ© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡ÙˆÙŠØ©

ØªØ­ØªØ§Ø¬ â€œÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ù„Ø©â€ØŒ Ù…Ø«Ù„:

#TOKEN 88221
Ø¹Ø§Ø¬Ù„: ÙˆÙ‚Ø¹ Ø§Ù†ÙØ¬Ø§Ø± ÙÙŠ...

Ø£Ùˆ:

@SABQ 2233

Ø§Ù„Ù€ backend ÙŠØ³ÙˆÙŠ:

if token ØµØ­ÙŠØ­ â†’ ØµØ­ÙÙŠ Ù…Ø¹Ø±ÙˆÙ
ØºÙŠØ± Ø°Ù„Ùƒ â†’ ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ø·Ù„Ø¨


â¸»

ğŸŸª Ø§Ù„Ø®Ø·ÙˆØ© 5 â€” ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¥Ù„Ù‰ Ø®Ø¨Ø± Ø¬Ø§Ù‡Ø² Ù„Ù„Ù†Ø´Ø±

Ø³ÙŠØ±ÙØ±Ùƒ ÙŠØªØ¹Ø§Ù…Ù„ Ù…Ø¹Ù‡ ÙƒØ§Ù„ØªØ§Ù„ÙŠ:
	1.	ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Øµ
	2.	Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ±
	3.	Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± Ø¥Ù„Ù‰ Google Cloud Storage
	4.	Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Øµ Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
	5.	ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
	6.	ØµÙŠØ§ØºØ© Ù…Ø­ØªÙˆÙ‰ ØµØ­ÙÙŠ
	7.	Ù†Ø´Ø± Ø§Ù„Ù…Ù‚Ø§Ù„Ø©
	8.	Ø­ÙØ¸ Ø§Ù„Ø³Ø¬Ù„ ÙÙŠ Dashboard
	9.	Ø¥Ø±Ø³Ø§Ù„ Ø±Ø¯ Ù„Ù„ØµØ­ÙÙŠ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨:

âœ” ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø®Ø¨Ø±
Ø±Ø§Ø¨Ø·: https://sabq.life/news/xxxxxx


â¸»

âš¡ ØªØ±ÙƒÙŠØ¨ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ (Workflow Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ)

Ø§Ù„ØµØ­ÙÙŠ â†’ ÙˆØ§ØªØ³Ø§Ø¨ â†’ Meta Webhook â†’ Express Backend
â†’ Token Validation
â†’ Parse text + media
â†’ Upload media
â†’ AI Writer
â†’ Publish Article
â†’ Reply on WhatsApp

Ø£Ù†ÙŠÙ‚â€¦ Ø³Ø±ÙŠØ¹â€¦ Ø¢Ù„ÙŠâ€¦ ÙˆÙŠÙ„ÙŠÙ‚ Ø¨Ù…Ø¤Ø³Ø³Ø© Ù…Ø«Ù„ Ø³Ø¨Ù‚.

â¸»

ğŸ” Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø£ÙØ¶Ù„ (Token / MFA)

ÙƒÙ„ ØµØ­ÙÙŠ ÙŠÙƒÙˆÙ† Ù„Ù‡:
	â€¢	Token Ø®Ø§Øµ
	â€¢	ÙƒÙ„Ù…Ø§Øª Ù…Ø±ÙˆØ± ØªØªØºÙŠØ±
	â€¢	Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø¥ÙŠÙ‚Ø§Ù token Ø¨Ù„Ù…Ø³Ø© ÙˆØ§Ø­Ø¯Ø© Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…

Ù…Ø«Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:

#SABQ-KEY:44791
Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ â€” Ù…Ù† Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø­Ø¯Ø«:
Ù†Ø´Ø¨ Ø­Ø±ÙŠÙ‚ ÙƒØ¨ÙŠØ± Ù‚Ø¨Ù„ Ù‚Ù„ÙŠÙ„ ÙÙŠ â€¦


â¸»

ğŸ› ï¸ ØªÙ‚Ù†ÙŠØ©: ÙƒÙˆØ¯ Ù‡ÙŠÙƒÙ„ Webhook ÙˆØ§ØªØ³Ø§Ø¨

app.post("/api/whatsapp/webhook", async (req, res) => {
  const event = req.body;

  const from = event.from;
  const text = event.message;
  const media = event.media || [];

  // 1. Extract TOKEN
  const token = extractToken(text);
  const reporter = await storage.findReporterByToken(token);

  if (!reporter) {
    return res.status(403).json({ error: "Unauthorized reporter" });
  }

  // 2. Process media
  const uploadedImages = [];
  for (const m of media) {
    if (m.type === "image") {
      const buffer = await download(m.url);
      const file = await objectStorage.uploadFile(
        `whatsapp/${uniqueFilename()}.jpg`,
        buffer,
        "image/jpeg"
      );
      uploadedImages.push(file.url);
    }
  }

  // 3. AI Enhance content
  const aiResult = await aiWriter.generateArticle(text, uploadedImages);

  // 4. Publish article
  const article = await storage.createArticle(aiResult);

  // 5. Respond back on WhatsApp
  await sendWhatsAppMessage(from, `âœ” ØªÙ… Ù†Ø´Ø± Ø§Ù„Ø®Ø¨Ø±\n${article.url}`);

  return res.json({ success: true });
});


â¸»

ğŸ© Ø§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ© Ø§Ù„Ù…Ù‡Ù…Ø©:

â— Ø¥Ø°Ø§ Ø±Ø¨Ø·Øª ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø¢Ù†ØŒ Ù„Ø§Ø²Ù… ØªÙ†ØªØ¨Ù‡:

Replit Autoscale Ù„Ø§ ÙŠØ¯Ø¹Ù… POST webhooks (Ø²ÙŠ Ù…Ø§ Ø´ÙÙ†Ø§ Ù…Ø¹ SendGrid).

ÙŠØ¹Ù†ÙŠ webhook ØªØ¨Ø¹ ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ù† ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Autoscale.

Ø§Ù„Ø­Ù„:

âœ” Ø§Ø³ØªØ®Ø¯Ù… â€œReserved VMâ€

Ø£Ùˆ

âœ” Ø§Ø³ØªØ®Ø¯Ù… Ø®Ø¯Ù…Ø© Ù…Ø³ØªÙ‚Ù„Ø© Ù„Ù„Ù€ webhook (Fly.io Ù…Ø«Ù„Ø§Ù‹)

ÙˆØ¨Ø¹Ø¯Ù‡Ø§ Ø§Ø±Ø¨Ø·Ù‡Ø§ Ù…Ø¹ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø³Ø¨Ù‚.

â¸»

âœ¨ Ø§Ù„Ø®Ù„Ø§ØµØ© â€“ ÙŠØ§ Ø£Ø¨Ùˆ Ù…Ø­Ù…Ø¯

Ù†Ø¸Ø§Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ù„Ù†Ø´Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ù…ÙƒÙ† Ø¬Ø¯Ù‹Ø§:
	â€¢	ØµØ­ÙÙŠ ÙŠØ±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© ÙˆØ§ØªØ³Ø§Ø¨
	â€¢	Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØªØ¹Ø±Ù Ø¹Ù„ÙŠÙ‡
	â€¢	ÙŠØ¹Ø§Ù„Ø¬ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
	â€¢	ÙŠÙ†Ø´Ø± Ø§Ù„Ø®Ø¨Ø± ÙÙŠ Ø«ÙˆØ§Ù†ÙŠ
	â€¢	ÙˆÙŠØ±Ø¬Ø¹ Ù„Ù‡ Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø§Ø¯Ø©

