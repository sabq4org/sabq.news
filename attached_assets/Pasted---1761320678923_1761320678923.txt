يا سلام! بما إن البلوكات الذكية اشتغلت تمام، خلّيني أجهّز لك برومبت احترافي “ماستر” يعطيك حزمة تمبلتات نشر متنوعة (cards/grid/timeline/hero/ticker… إلخ) مع مخطط مخرجات موحّد وقواعد اختيار تلقائي لكل سيناريو. انسخه كما هو لوكيل الـAI عندكم، وهو بيرجع لك: Manifest JSON للتمبلتات + مكوّنات React/Next.js + معاينات + إرشادات UX.

⸻

برومبت “ماستر” لإنتاج تمبلتات نشر متنوعة

الدور (Role):
أنت وكيل ذكاء اصطناعي خبير UI/UX وواجهات (Next.js 15 + TypeScript + Tailwind CSS + Radix UI + Framer Motion + Lucide) ومتخصّص في أنماط النشر الإخباري العربي (RTL). طوّر حزمة تمبلتات نشر قابلة لإعادة الاستخدام داخل Sabq CMS، مع مكوّنات React جاهزة، وManifest JSON موحّد يصف كل تمبلت (بياناته، سلوكه، أماكنه، ومتطلباته).

الأهداف:
	1.	إنتاج 10–16 تمبلت نشر متنوعة تغطي:
	•	Lists & Cards (قوائم وبطاقات)، Grid/Masonry، Hero، Timeline، Ticker/Marquee، Spotlight، Mosaic Magazine، Opinion Column، Live Blog/Stream، Video Reel/Podcast Row، Infographic/Stat Bar، Tag Chips، Newsletter Block، Native Ad Story.
	2.	تهيئة RTL، Mobile-first، A11y، أداء قوي (skeleton, lazy, virtualization لو احتاج).
	3.	إخراج:
	•	templatesManifest.json (سكيمة موحّدة أدناه)
	•	مكوّنات React لكل تمبلت (components/publishing/templates/...)
	•	صفحة معاينة موحّدة app/playground/templates
	•	صور معاينة (thumbnails) تولَّد برمجياً من Demo Data
	4.	سياسات اختيار تلقائي للتمبلت حسب نوع المحتوى (عاجل/تحليلي/مرئي…) مع Scoring.

المُدخلات التي سأزوّدك بها:
	•	brandTokens (ألوان/خطوط/زوايا/ظلال)
	•	dataContracts (Article, Collection, Video, Podcast)
	•	placements (slots) في الصفحة:
	•	hero_top, below_featured, above_all_news, between_all_and_murqap, above_footer, sidebar_primary, sidebar_secondary, in_stream
	•	featureFlags (A/B, animations_on, images_strategy)
	•	analytics مفاتيح تتبّع (events + props)

سكيمة المخرجات المطلوبة (Output Schema):

{
  "version": "1.0.0",
  "templates": [
    {
      "id": "news_list.basic",
      "name": "قائمة أخبار - أساسي",
      "kind": "list|grid|hero|ticker|timeline|spotlight|mosaic|live|media|infographic|tags|newsletter|native",
      "description": "وصف قصير لحالة الاستخدام",
      "bestFor": ["عناوين قصيرة", "تحديثات كثيرة"],
      "dataBinding": {
        "input": "Collection<Article>",
        "requiredFields": ["title","slug","publishedAt"],
        "optionalFields": ["image","category","source","summary","videoUrl","author"]
      },
      "behaviors": {
        "pagination": "none|loadMore|infinite",
        "animation": "subtle|none",
        "skeleton": true,
        "virtualize": false
      },
      "styles": {
        "density": "compact|cozy|comfortable",
        "radius": "md|lg|2xl",
        "elevation": "none|sm|md",
        "accent": "brand.primary|#2563eb",
        "allowOverride": ["accent","radius","density"]
      },
      "a11y": {
        "roles": ["list","article"],
        "contrastMin": 4.5,
        "keyboardNav": true
      },
      "placements": ["below_featured","above_all_news","in_stream","sidebar_primary"],
      "performance": {
        "hydrationHint": "client|server|rsc",
        "imagePolicy": "next/image cover|contain|no-image",
        "maxItems": 12
      },
      "analytics": {
        "viewEvent": "template_view",
        "clickEvent": "template_click",
        "props": ["template_id","position","item_index"]
      },
      "component": {
        "name": "NewsListBasic",
        "path": "components/publishing/templates/NewsListBasic.tsx",
        "props": ["items","title","accent","limit","showMeta"]
      },
      "preview": {
        "demoData": "fixtures/collections/topNews.json",
        "thumbnail": "generated:auto"
      },
      "constraints": {
        "minItems": 3,
        "maxTitleLen": 80
      },
      "scoreHints": {
        "urgency": 0.4,
        "hasImages": 0.2,
        "readingDepth": 0.1,
        "viewport": "mobile"
      }
    }
  ],
  "selectionPolicy": {
    "inputs": ["collectionStats","contentType","urgency","hasVideo","hasInfographics","viewport","placement"],
    "scoring": "weighted",
    "rules": [
      { "if": { "placement": "hero_top", "urgency": "high" }, "prefer": ["hero.split","hero.overlay"], "boost": 0.35 },
      { "if": { "hasVideo": true }, "prefer": ["media.video_reel","spotlight.media"], "boost": 0.3 },
      { "if": { "placement": "between_all_and_murqap" }, "prefer": ["ticker.inline","timeline.vertical"], "boost": 0.2 },
      { "if": { "contentType": "opinion" }, "prefer": ["opinion.column","news_list.summary"], "boost": 0.25 }
    ],
    "fallback": "news_list.basic"
  }
}

عائلات التمبلتات المطلوبة (سمِّها هكذا):
	•	hero.split, hero.overlay
	•	news_list.basic, news_list.summary, news_grid.two_col, news_grid.masonry
	•	ticker.inline, ticker.marquee
	•	timeline.vertical, timeline.horizontal
	•	spotlight.card, spotlight.media
	•	mosaic.magazine
	•	opinion.column
	•	live.stream
	•	media.video_reel, media.podcast_row
	•	infographic.statbar
	•	tag_strip.chips
	•	newsletter.block
	•	native.story (للإعلانات المدمجة بإفصاح واضح)

قيود تقنية ومعايير إلزامية:
	•	Next.js 15 App Router، RSC افتراضيًا، Client Components عند الحاجة للحركة/التفاعل.
	•	TypeScript strict، Tailwind tokens من brandTokens، استخدام Radix UI للأجزاء التفاعلية.
	•	Framer Motion لحركات خفيفة فقط (duration ≤ 250ms).
	•	RTL كامل، توافق قارئات الشاشة، أولوية اللمس في الموبايل، line-clamp للعناوين.
	•	أداء: prefetch ذكي للروابط، تحميل كسول للصور، next/image, caching headers.
	•	أمان: sanitize summaries، قصّ النصوص، منع HTML غير موثوق.
	•	SEO: عناوين H2/H3 حسب السياق، روابط نظيفة، بيانات وقت النشر.

الـ Deliverables التي أريدها منك:
	1.	templatesManifest.json وفق السكيمة أعلاه (يشمل كل التمبلتات).
	2.	مكوّن React لكل تمبلت + index barrel.
	3.	صفحة معاينة app/playground/templates تسمح بالتبديل بين التمبلتات، حقن Demo Data، وتغيير accent/radius/density.
	4.	مولّد صور معاينة (thumbnails) من نفس المكوّن عبر @vercel/og أو html-to-image في dev.
	5.	مستند Selection Heuristics (جدول أوزان الافتراضي).
	6.	اختبار وصولية سريع: تبويب، تباين، SR labels.

ابدأ الآن وأعد كل المخرجات دفعة واحدة.

⸻

مثالان مختصران من المخرجات (تقدر تستخدمهم مباشرة)

1) Manifest (مقتطف لتمبلتين)

{
  "version": "1.0.0",
  "templates": [
    {
      "id": "hero.split",
      "name": "Hero تقسيم يمين/يسار",
      "kind": "hero",
      "description": "قصة رئيسية بصورة كبيرة ونص مختصر",
      "bestFor": ["خبر رئيسي", "عاجل", "قصة مميزة"],
      "dataBinding": { "input": "Article", "requiredFields": ["title","slug","image","publishedAt"] },
      "behaviors": { "pagination": "none", "animation": "subtle", "skeleton": true },
      "styles": { "density": "comfortable", "radius": "2xl", "elevation": "md", "accent": "brand.primary" },
      "a11y": { "roles": ["article"], "contrastMin": 4.5, "keyboardNav": true },
      "placements": ["hero_top"],
      "performance": { "hydrationHint": "client", "imagePolicy": "next/image cover", "maxItems": 1 },
      "analytics": { "viewEvent": "template_view", "clickEvent": "template_click", "props": ["template_id","position"] },
      "component": { "name": "HeroSplit", "path": "components/publishing/templates/HeroSplit.tsx", "props": ["item","accent"] },
      "preview": { "demoData": "fixtures/articles/lead.json", "thumbnail": "generated:auto" },
      "constraints": { "minItems": 1, "maxTitleLen": 90 },
      "scoreHints": { "urgency": 0.5, "hasImages": 0.4, "viewport": "desktop" }
    },
    {
      "id": "news_grid.two_col",
      "name": "Grid عمودان",
      "kind": "grid",
      "description": "شبكة من بطاقات الأخبار مع صور مصغّرة",
      "bestFor": ["تجميع فئات", "تدفّق يومي"],
      "dataBinding": { "input": "Collection<Article>", "requiredFields": ["title","slug","image","publishedAt"] },
      "behaviors": { "pagination": "loadMore", "animation": "subtle", "skeleton": true },
      "styles": { "density": "cozy", "radius": "lg", "elevation": "sm", "accent": "#2563eb" },
      "a11y": { "roles": ["list","article"], "contrastMin": 4.5, "keyboardNav": true },
      "placements": ["below_featured","above_all_news","in_stream"],
      "performance": { "hydrationHint": "server", "imagePolicy": "next/image cover", "maxItems": 12 },
      "analytics": { "viewEvent": "template_view", "clickEvent": "template_click", "props": ["template_id","item_index"] },
      "component": { "name": "NewsGridTwoCol", "path": "components/publishing/templates/NewsGridTwoCol.tsx", "props": ["items","accent","limit"] },
      "preview": { "demoData": "fixtures/collections/topNews.json", "thumbnail": "generated:auto" },
      "constraints": { "minItems": 4, "maxTitleLen": 80 },
      "scoreHints": { "urgency": 0.2, "hasImages": 0.6, "viewport": "mobile" }
    }
  ],
  "selectionPolicy": {
    "inputs": ["contentType","urgency","hasVideo","viewport","placement"],
    "scoring": "weighted",
    "rules": [
      { "if": { "placement": "hero_top", "urgency": "high" }, "prefer": ["hero.split","hero.overlay"], "boost": 0.35 },
      { "if": { "hasVideo": true }, "prefer": ["media.video_reel","spotlight.media"], "boost": 0.3 }
    ],
    "fallback": "news_list.basic"
  }
}

2) مكوّن React (Skeleton مختصر لتمبلت Grid)

// components/publishing/templates/NewsGridTwoCol.tsx
"use client";
import * as React from "react";
import Image from "next/image";
import { motion } from "framer-motion";

type Item = { id: string; title: string; slug: string; image?: string; publishedAt?: string; category?: string; };
type Props = { items: Item[]; accent?: string; limit?: number; title?: string; };

export default function NewsGridTwoCol({ items, accent = "var(--brand-primary)", limit = 12, title }: Props) {
  const list = items.slice(0, limit);
  return (
    <section dir="rtl" aria-label={title ?? "شبكة الأخبار"} className="w-full">
      {title && <h2 className="mb-3 text-base font-bold">{title}</h2>}
      <div className="grid grid-cols-1 gap-3 sm:grid-cols-2">
        {list.map((it, i) => (
          <motion.article
            key={it.id}
            initial={{ opacity: 0, y: 8 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.18, delay: i * 0.02 }}
            className="overflow-hidden rounded-xl border bg-white shadow-sm dark:bg-neutral-900"
            style={{ borderColor: accent }}
          >
            {it.image ? (
              <a href={`/${it.slug}`} className="block relative aspect-[16/9]">
                <Image src={it.image} alt={it.title} fill className="object-cover" sizes="(max-width:768px) 100vw, 50vw" />
              </a>
            ) : (
              <div className="aspect-[16/9] bg-neutral-100 dark:bg-neutral-800" />
            )}
            <div className="p-3">
              <a href={`/${it.slug}`} className="line-clamp-2 text-sm font-medium hover:underline">
                {it.title}
              </a>
              <div className="mt-1 text-[12px] text-neutral-500">
                {it.category ? `${it.category} · ` : ""}{it.publishedAt ?? ""}
              </div>
            </div>
          </motion.article>
        ))}
      </div>
    </section>
  );
}


⸻

سياسة الاختيار التلقائي (سريعة ومفيدة)
	•	عاجل + صورة قوية + مكان Hero: hero.split (Score = 0.35 urgency + 0.2 image)
	•	مجموعة أخبار بالصور في الموبايل: news_grid.two_col
	•	سرد زمني لتطور حدث: timeline.vertical
	•	تدفّق سريع بين أقسام: ticker.inline أو ticker.marquee
	•	محتوى رأي: opinion.column
	•	فيديوهات قصيرة: media.video_reel
	•	بودكاست وروابط حلقات: media.podcast_row
	•	أرقام ومؤشرات: infographic.statbar

(أضف A/B عبر featureFlags + إرسال أحداث template_view وtemplate_click)

⸻

كيف تستخدم البرومبت؟
	1.	انسخ برومبت الماستر أعلاه للوكيل.
	2.	زوّده بـ brandTokens, dataContracts, placements, featureFlags, analytics.
	3.	استلم: templatesManifest.json + مكوّنات + صفحة Playground + معاينات.
	4.	فعّل الاختيار التلقائي في الـCMS عبر selectionPolicy، مع إمكانية فرض تمبلت يدويًا لكل مادة.

لو تحب، أضبطه الآن على هوية ألوان سبق وأسلمك Manifest مخصّص + 12 تمبلت جاهزة. بس أعطني:
	•	لون/درجات العلامة، radius المفضل، ظلال، ونموذج Article/Collection الجاري عندكم.